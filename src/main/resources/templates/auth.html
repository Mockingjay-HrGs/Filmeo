<!doctype html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Connexion - FILMEO</title>
    <link rel="stylesheet" th:href="@{/static/css/auth.css}">
</head>
<body>

<div class="auth-shell">
    <div class="auth-card">

        <div class="tabs">
            <a class="tab"
               th:classappend="${activeTab == 'login'} ? ' active' : ''"
               th:href="@{/auth(tab='login')}">Connexion</a>

            <a class="tab"
               th:classappend="${activeTab == 'register'} ? ' active' : ''"
               th:href="@{/auth(tab='register')}">Inscription</a>
        </div>

        <div th:if="${param.error}" class="alert error">Pseudo ou mot de passe incorrect.</div>
        <div th:if="${registered}" class="alert success">Compte crÃ©Ã© âœ… Connecte-toi.</div>
        <div th:if="${registerError != null and !#strings.isEmpty(registerError)}"
             class="alert error"
             th:text="'Erreur : ' + ${registerError}">
        </div>

        <form th:action="@{/login}" method="post" id="loginForm" class="form active">

            <div class="input-group">
                <span class="icon">ðŸ‘¤</span>
                <input type="text" name="username" placeholder="Pseudo" required>
            </div>

            <div class="input-group">
                <span class="icon">ðŸ”’</span>
                <input type="password" name="password" placeholder="Mot de passe" required>
            </div>

            <button type="submit">Se connecter</button>

            <p class="error" th:if="${param.error}">Pseudo ou mot de passe incorrect</p>
        </form>


        <section th:if="${activeTab == 'register'}">
            <h1>Inscription</h1>

            <form class="form" th:action="@{/register}" method="post" th:object="${form}">
                <div class="field">
                    <label class="label">Pseudo</label>
                    <div class="control">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24"><path d="M12 12c2.76 0 5-2.46 5-5.5S14.76 1 12 1 7 3.46 7 6.5 9.24 12 12 12zm0 2c-4.42 0-8 2.69-8 6v2h16v-2c0-3.31-3.58-6-8-6z"/></svg>
            </span>
                        <input type="text" th:field="*{pseudo}" placeholder="Pseudo" required>
                    </div>
                </div>

                <div class="field">
                    <label class="label">Email</label>
                    <div class="control">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24"><path d="M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 4-8 5L4 8V6l8 5 8-5v2z"/></svg>
            </span>
                        <input type="email" th:field="*{email}" placeholder="Email" required>
                    </div>
                </div>

                <div class="field">
                    <label class="label">Mot de Passe</label>
                    <div class="control">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24"><path d="M17 9h-1V7a4 4 0 0 0-8 0v2H7a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2zm-7-2a2 2 0 1 1 4 0v2h-4V7z"/></svg>
            </span>
                        <input type="password" th:field="*{password}" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
                    </div>
                </div>

                <div class="field">
                    <label class="label">Confirmer Mot de passe</label>
                    <div class="control">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24"><path d="M17 9h-1V7a4 4 0 0 0-8 0v2H7a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2zm-7-2a2 2 0 1 1 4 0v2h-4V7z"/></svg>
            </span>
                        <input type="password" th:field="*{confirmPassword}" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
                    </div>
                </div>

                <button class="btn" type="submit">Sâ€™inscrire</button>

                <p class="notice">
                    DÃ©jÃ  un compte ? <a th:href="@{/auth(tab='login')}">Se connecter</a>
                </p>
            </form>
        </section>

    </div>
</div>

</body>
</html>
